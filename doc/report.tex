\documentclass[]{scrreprt}


% Title Page
\title{SSNS Project}
\author{Gabriele Orazi, Stephan Hauser}

\begin{document}
\maketitle

\part{System components}
\section{Dashboard}
\subsection{API}
The dashboard implements the following Web API, accepting requests in JSON to the specified endpoints.

\subsubsection{Register node}
Registers a sensor node in the database using the Xbee serial number as the unique identifier.

\subsubsection*{URL}
\texttt{POST /api/v1/node/register}

\subsubsection*{Request parameters}
\begin{description}
\item[serial] Xbee serial number (unique node identifier)
\item[publicKey] ECC public key generated on the node
\item[signature] ECC-DSA signature over 'serial,publicKey'
\end{description}

\subsubsection*{Response parameters}
No content.

\subsubsection*{Status codes}
\begin{description}
\item[204 No content] Registration successful
\item[400 Invalid request] Invalid key or duplicate serial number
\item[401 Unauthenticated] Invalid signature
\end{description}

\subsubsection{Hello}
Registers the node as active and requests an encryption key to use for the current session.

\subsubsection*{URL}
\texttt{POST /api/v1/node/hello}

\subsubsection*{Request parameters}
\begin{description}
\item[serial] Xbee serial number (unique node identifier)
\item[cnonce] Nonce for the request
\item[signature] ECC-DSA signature over 'serial,cnonce'
\end{description}

\subsubsection*{Response parameters}
\begin{description}
\item[key] Secret key, encrypted with node's public key
\end{description}

\subsubsection*{Status codes}
\begin{description}
\item[200 OK] Handshake successful
\item[400 Invalid request] Invalid nonce
\item[401 Unauthenticated] Invalid serial or signature
\end{description}

\subsubsection{Store measurement}
Stores a measurement for a given node.

\subsubsection*{URL}
\texttt{POST /api/v1/measurement}

\subsubsection*{Request parameters}
\begin{description}
\item[serial] Xbee serial number
\item[measurement[n].type] Sensor type
\item[measurement[n].value] Measurement
\item[signature] ECC-DSA signature over 'serial,measurement[0].type,measurement[0].value,...,measurement[n].type,measurement[n].value'
\end{description}

\subsubsection*{Response parameters}
No content.

\subsubsection*{Status codes}
\begin{description}
\item[204 No content] Measurement recorded successful
\item[400 Invalid request] Invalid sensor type
\item[401 Unauthenticated] Invalid serial or signature
\end{description}


\end{document}
